\chapter{\BibTeX による参考文献一覧の出力}
\label{ch:bibtex}

\LaTeX では文献リストを作る方法として \verb|thebibliography| 環境の中で \verb|\bibitem| コマンドを使用する方法があります．
しかし，この方法は文献リストを人間が全て手打ちで入力しなければいけません．
引用する文献が片手で数え切れるくらいの数であれば全て手打ちで文献リストを作ってもいいかもしれませんが，学術論文や学位論文になると人力で文献リストを作るのは時間の無駄ですしミスの元になります\footnote{学会の講演論文テンプレート等では，人力で文献リストを作る方法が採用されているものが結構あります．\texttt{\textbackslash bibitem} コマンド等を使って自力でリストを作成する方法は大抵の \LaTeX 入門書に記載があるのでそちらを参考にしてください．}．

そこで，\BibTeX を使用した参考文献リストの作成方法を説明します．
\BibTeX を使えばユーザーが作成した \verb|bib| ファイルを読み込んで自動で文献リストを作ってくれます\footnote{\BibTeX は現在でも広く使われていますが，最近は \BibTeX の後継として \texttt{biblatex} が徐々に普及してきています．この学位論文テンプレートでは後述の \texttt{jsme.bst} を使用しているため \BibTeX の内容に限定して記載しています．将来的には \texttt{biblatex} に置き換えたいと考えています．}．

\section{\texttt{jsme.bst} について}
\label{sec:jsme-bst}

文献の引用方法は学会やジャーナルによって細かいルールが異なります．
それぞれの論文での引用ルールに則った出力を得るために必要なものが \BibTeX スタイルファイル，\verb|bst| ファイルです．
\BibTeX を走らせるときは \verb|bst| ファイルを読み込んで文献リストの出力方法を決めます．
有名な \verb|bst| ファイルとして \verb|jplain.bst| や \verb|jecon.bst| があります．

東京理科大学創域理工学部機械航空宇宙工学科の卒業論文では，参考文献一覧および本文中での引用に関して一般社団法人日本機械学会の論文執筆テンプレートの書き方に沿って記載するよう決められています．
しかし，日本機械学会から公式な \BibTeX スタイルテンプレートは配布されていません．
そこで，塚原研究室所属の学生が日本機械学会の参考文献の書き方を再現した「非公式の」\BibTeX スタイルテンプレート\footnote{\texttt{JSME-bst}, \textless\url{https://github.com/Yuki-MATSUKAWA/JSME-bst}\textgreater}を開発し，GitHub で公開しているのでこれを使用します．
使用方法は一般的な \BibTeX と同様ですが，詳細な説明書（\href{https://github.com/Yuki-MATSUKAWA/JSME-bst/blob/main/JSME-template1.pdf}{\texttt{JSME-template1.pdf}}）がリポジトリ内にあるので何か問題があった場合はそれを読むようにしましょう．
日本機械学会の規定通りの文献出力を得るには \verb|jsme.bst| を使用すれば大丈夫ですが，\verb|TUS-ME_thesis_template| リポジトリ内には最初から \verb|jsme.bst| が入っているのでこれを読んでいる皆さんが新たに \verb|jsme.bst| ファイルを \verb|JSME-bst| リポジトリから移してくる必要はありません．

\section{\texttt{bib} ファイルについて}
\label{sec:bib-file}

\BibTeX は自動で文献リストを作ってくれるとは言ったものの，書誌情報は与えてあげないといけません．
\verb|bib| ファイルには自分が引用する書誌情報を記載します．
\verb|bib| ファイルの書き方は \verb|JSME-bst| 内の \href{https://github.com/Yuki-MATSUKAWA/JSME-bst/blob/main/JSME-template1.pdf}{\texttt{JSME-template1.pdf}} で詳細に書いてあるのでそちらをよく読んでください．
\BibTeX 初心者にとっても痒い所に手が届くように書かれています．
ただ，基本的な内容だけここにも書いておきます．

\verb|bib| ファイルに入力する書誌情報は次のような構造になっています．
\begin{tcolorbox}[enhanced, title=\textgt{\texttt{bib} ファイル内の書誌情報の構造}, drop fuzzy shadow]
\begin{verbatim}
@エントリー名{参照キー,
    フィールド1 = {},
    フィールド2 = {},
    フィールド3 = {}
}
\end{verbatim}
\end{tcolorbox}
\noindent
だいたいの雑誌論文のウェブサイトでは \BibTeX 形式で書誌情報を出力できる機能があるのでそこから \verb|bib| ファイルをダウンロードします．
もちろん，ダウンロードした \verb|bib| ファイルを自分で書き換えることもできますし，自分で一から \verb|bib| ファイルを作成することも可能です．
文献を本文中で引用する際は \verb|\citet{Matsukawa:PoF2022}| のように書きます．
このときの \verb|Matsukawa:PoF2022| が参照キーです．
参照キーの書き方に特に規則は無く，半角カンマ以外の半角記号も使用可能です．
ただ，自分の中でマイルールを設けておくと引用する際に楽です．

\section{本文中での引用方法}
\label{sec:cite}

このテンプレートでは \verb|natbib| パッケージを読み込んでいるため，本文中での文献引用方法が豊富に用意されています．
詳細は \verb|JSME-bst| の \href{https://github.com/Yuki-MATSUKAWA/JSME-bst/blob/main/JSME-template1.pdf}{\texttt{JSME-template1.pdf}} にも記載しているので，詳細はそちらを参照してください．
ただ，\verb|natbib| でサポートされているコマンドを全て使用する必要はなく，このテンプレートでの使用が想定されるのは以下のものです．
下記コマンドのうち，最後の \verb|\citepe{}| のみ，このテンプレート用に作成したオリジナルのコマンドなので注意してください．

\begin{tcolorbox}[enhanced, title=\textgt{本文中での文献引用コマンド（テンプレート用に一部改変・追加）}, drop fuzzy shadow]
    \begin{tabular}{ll}
        \textgt{コマンド}    & \textgt{出力} \\ \hline
        \verb|\citet{Matsukawa:PoF2022}|    & \citet{Matsukawa:PoF2022} \\
        \verb|\citet{松川:流力年会2022}|    & \citet{松川:流力年会2022} \\
        \verb|\citep{Matsukawa:PoF2022}|    & \citep{Matsukawa:PoF2022} \\
        \verb|\citep{松川:流力年会2022}|    & \citep{松川:流力年会2022} \\
        \verb|\citepe{Matsukawa:PoF2022}|   & \citepe{Matsukawa:PoF2022}
    \end{tabular}
\end{tcolorbox}

文献を通常の文章中に \citet{Matsukawa:PoF2022}, \citet{松川:流力年会2022} のように挿入する場合は \verb|\citet{}| で引用してください．
また，文末等に括弧に入れる形で\citep{Matsukawa:PoF2022,松川:流力年会2022}のように挿入する場合は \verb|\citep{}| で引用してください．
本来 \verb|\citep{}| コマンドで出力する括弧は半角括弧 () ですが，この学位論文テンプレートは日本語での執筆を想定しているので設定ファイル内で全角括弧（）に変更しています．
この学位論文テンプレートではなく，海外のジャーナル論文を執筆する際は \verb|\citep{}| で半角括弧が出力されます．
ただし，日本語で論文を執筆している場合でも図表のキャプションは英語で書きます．
英文中に全角括弧が出現したら不自然なので，キャプション中は \verb|\citepe{}| というオリジナルのコマンドを使用してください．
また，図表のキャプション中で日本語文献を引用する場合は引用の出力を英語にしたいですね．
この場合は \verb|\citealias{}| コマンド や \verb|\citepalias{}| コマンドが便利です．
詳細は \verb|JSME-bst| の \href{https://github.com/Yuki-MATSUKAWA/JSME-bst/blob/main/JSME-template1.pdf}{\texttt{JSME-template1.pdf}} にも記載していますが，\verb|\defcitealias{}| コマンドを使い，読み込む文献と出力結果を自分で定義することで任意の形での出力が可能です．



